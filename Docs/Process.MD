# 윤채의 MP3 다운로더 웹 버전 (YC_mp3_Web) 구현 계획

## 1. 프로젝트 초기 설정 (1-2일)

### 1.1. 개발 환경 구축
- Next.js 14 프로젝트 초기화: `npx create-next-app@latest`
- TypeScript 설정 확인
- ESLint 및 Prettier 설정: 코드 일관성 유지를 위함
- Git 저장소 초기화 및 .gitignore 설정

### 1.2. 기본 패키지 설치
```bash
npm install @prisma/client next-auth bcrypt jsonwebtoken socket.io
npm install -D prisma tailwindcss postcss autoprefixer
```

### 1.3. TailwindCSS 구성
- TailwindCSS 초기화: `npx tailwindcss init -p`
- 기본 테마 및 색상 설정
- 다크 모드 설정
- 모바일 최적화 유틸리티 클래스 정의

### 1.4. 데이터베이스 구성
- Prisma 초기화: `npx prisma init`
- PRD에 정의된 데이터 모델 구현 (File, Share, Settings, DownloadQueue)
- 초기 마이그레이션 실행: `npx prisma migrate dev --name init`
- 기본 데이터 시드 작성 (초기 비밀번호 등)

### 1.5. 기본 프로젝트 구조 설정
- 디렉토리 구조 설정 (app/, components/, lib/ 등)
- 레이아웃 컴포넌트 생성
- 글로벌 스타일 설정
- 폰트 및 아이콘 설정 (필요시 Google Fonts 또는 로컬 폰트)

## 2. 인증 시스템 구현 (1-2일)

### 2.1. 단일 비밀번호 인증 기능
- NextAuth.js 설정 (app/api/auth/[...nextauth]/route.js)
- Credentials 제공자 설정 (비밀번호만 확인)
- 비밀번호 암호화를 위한 bcrypt 유틸리티 함수 작성
- JWT 설정 및 토큰 처리

### 2.2. 로그인 화면 구현
- 로그인 폼 컴포넌트 작성 (app/page.js)
- 비밀번호 입력 필드 및 유효성 검증
- '비밀번호 기억하기' 옵션 구현 (쿠키/로컬 스토리지)
- 애니메이션 및 시각적 효과 추가

### 2.3. 인증 상태 관리
- 인증 상태 확인을 위한 훅 작성 (useAuth)
- 인증 컨텍스트 구현 (AuthContext)
- 미들웨어 설정으로 인증 강제 (middleware.js)
- 인증된 사용자만 액세스 가능한 라우트 보호

## 3. 핵심 다운로드 기능 구현 (3-4일)

### 3.1. 서버 측 다운로드 로직 구현
- yt-dlp 및 ffmpeg 연동 유틸리티 작성
- MP3 다운로드 함수 구현
- 다운로드 큐 관리 시스템 구현
- 백그라운드 작업 처리기 설정

### 3.2. 유튜브 단일 영상 다운로드 API
- /api/youtube/download 엔드포인트 구현
- URL 유효성 검증
- 다운로드 상태 조회 API 엔드포인트
- 오류 처리 및 로깅

### 3.3. 유튜브 플레이리스트 다운로드 기능
- 플레이리스트 정보 추출 로직
- 개별 항목 순차 다운로드 처리
- 진행 상태 추적 및 업데이트

### 3.4. 실시간 상태 업데이트 구현
- Socket.io 서버 설정
- 다운로드 진행 이벤트 발신
- 클라이언트 측 소켓 연결 및 상태 업데이트 수신

### 3.5. 유튜브 다운로드 UI 개발
- 유튜브 탭 페이지 구현 (app/youtube/page.js)
- URL 입력 폼 및 유효성 검사
- 다운로드 옵션 선택 UI (MP3/720p)
- 진행 상태 표시 컴포넌트 (진행 바, 퍼센트 등)
- 최근 다운로드 이력 표시

## 4. 파일 관리 시스템 구현 (2-3일)

### 4.1. 파일 저장 및 관리 API
- /api/files 엔드포인트 구현 (GET, POST, DELETE)
- 파일 메타데이터 저장 로직
- 파일 시스템 경로 관리
- 썸네일 생성 및 저장

### 4.2. 파일 목록 UI 구현
- 파일 목록 페이지 개발 (app/files/page.js)
- 파일 카드/리스트 컴포넌트 디자인
- 정렬 및 필터링 기능
- 검색 기능 구현

### 4.3. 파일 다운로드 기능
- 개별 파일 다운로드 처리기
- 다중 파일 선택 및 다운로드 로직
- 전체 다운로드 기능
- 다운로드 진행 상태 표시

### 4.4. 파일 미리보기 및 재생
- 오디오 플레이어 컴포넌트 개발
- 미니 플레이어 UI 구현
- 재생 컨트롤 (재생, 일시정지, 다음/이전, 음량 등)
- 재생 목록 관리

## 5. 공유 기능 구현 (2일)

### 5.1. 공유 링크 생성 API
- /api/shares 엔드포인트 구현
- 고유 단축 코드 생성 로직
- 만료 시간 설정 및 관리
- 접근 제어 및 보안 확인

### 5.2. 공유 UI 개발
- 공유 관리 페이지 구현 (app/shares/page.js)
- 파일 선택 및 공유 설정 UI
- 만료 기간 선택 옵션
- 생성된 링크 표시 및 복사 기능

### 5.3. 공유 링크 접근 페이지
- 공유 링크 접근 페이지 개발 (app/share/[code]/page.js)
- 공유된 파일 목록 표시
- 다운로드 및 스트리밍 옵션
- 링크 유효성 및 만료 확인

### 5.4. QR 코드 기능
- qrcode.react 통합
- 공유 링크에 대한 QR 코드 생성
- QR 코드 다운로드 및 공유 옵션

## 6. 멜론 차트 기능 구현 (3일)

### 6.1. 멜론 차트 크롤링 로직
- 멜론 차트 데이터 추출 유틸리티
- TOP 30/50/100 차트 선택적 크롤링
- 곡 정보 (제목, 아티스트, 앨범 등) 파싱

### 6.2. 멜론 차트 다운로드 API
- /api/melon/download 엔드포인트 구현
- 차트 크기 파라미터 처리
- 제외 키워드 필터링 로직
- 다운로드 큐에 항목 추가

### 6.3. 유튜브 검색 및 연동
- 멜론 차트 곡 정보로 유튜브 검색 로직
- 최적 매칭 알고리즘 구현
- 앨범 아트 추출 및 MP3 태그 설정

### 6.4. 멜론 차트 UI 개발
- 멜론 차트 페이지 구현 (app/melon/page.js)
- 차트 크기 선택 UI (라디오 버튼, 슬라이더 등)
- 제외 키워드 입력 UI (태그 입력)
- 차트 미리보기 및 선택적 다운로드

## 7. 파일 관리 고급 기능 구현 (2일)

### 7.1. 파일 삭제 기능
- 개별 파일 삭제 기능
- 다중 선택 및 일괄 삭제
- 스와이프 제스처로 삭제 (모바일 최적화)
- 삭제 확인 및 실행 취소 기능

### 7.2. 저장 공간 관리
- 저장 공간 사용량 계산 로직
- 저장 공간 제한 설정 기능
- 시각적 사용량 표시 (프로그레스 바 등)
- 자동 정리 옵션 (오래된 파일 등)

### 7.3. 파일 정렬 및 필터링
- 다양한 정렬 옵션 (날짜, 이름, 크기 등)
- 필터링 기능 (파일 유형, 날짜 범위 등)
- 뷰 모드 전환 (그리드/리스트)
- 모바일 친화적 UI 최적화

### 7.4. 태그 및 메타데이터 관리
- MP3 태그 편집 기능
- 커스텀 태그 및 분류 시스템
- 메타데이터 자동 추출 및 관리
- 썸네일 및 커버 아트 관리

## 8. 비디오 다운로드 기능 구현 (2일)

### 8.1. 비디오 다운로드 로직
- 720p 비디오 다운로드 함수 구현
- 비디오 포맷 처리 및 변환
- 메타데이터 추출 및 저장
- 썸네일 생성

### 8.2. 비디오 재생 기능
- 비디오 플레이어 컴포넌트 개발
- 재생 컨트롤 및 기능
- 화질 설정 및 관리
- 전체 화면 모드 지원

### 8.3. 비디오 관리 UI
- 비디오 섹션 UI 개발
- 비디오 미리보기 썸네일
- 비디오 목록 및 그리드 뷰
- 모바일 최적화 비디오 컨트롤

## 9. PWA 및 모바일 지원 구현 (2일)

### 9.1. PWA 설정
- Next-PWA 설치 및 구성
- 서비스 워커 설정
- 매니페스트 파일 구성
- 오프라인 지원 설정

### 9.2. 오프라인 기능 구현
- IndexedDB를 활용한 로컬 캐싱
- 오프라인 재생 기능
- 동기화 로직 개발
- 네트워크 상태 감지 및 대응

### 9.3. 모바일 알림 기능
- Web Push API 통합
- 다운로드 완료 알림 구현
- 알림 설정 및 관리 UI
- 배지 및 액션 지원

### 9.4. 모바일 최적화 검증
- iOS 및 Android 테스트
- 터치 인터페이스 최적화
- 화면 크기 반응형 테스트
- 배터리 사용량 최적화

## 10. 배포 및 운영 준비 (2일)

### 10.1. 서버 환경 설정
- Ubuntu 서버 설정
- Node.js, npm 설치
- MySQL 설치 및 구성
- yt-dlp, ffmpeg 설치

### 10.2. Nginx 및 SSL 설정
- Nginx 설치 및 구성
- 리버스 프록시 설정
- Let's Encrypt로 SSL 인증서 발급
- HTTPS 강제 및 보안 헤더 설정

### 10.3. 배포 자동화
- GitHub Actions 또는 Jenkins 설정
- 자동 빌드 및 배포 파이프라인
- 롤백 및 복구 전략
- 환경별 설정 관리

### 10.4. 모니터링 및 로깅
- PM2 설정 및 모니터링
- 로그 관리 설정
- 오류 알림 시스템
- 백업 및 복구 전략

## 11. 출시 및 사용자 피드백 (지속적)

### 11.1. 초기 사용자 테스트
- 베타 테스트 그룹 구성
- 사용성 테스트 및 피드백 수집
- 주요 오류 수정 및 개선

### 11.2. 사용자 피드백 채널 구축
- 피드백 폼 설정
- 오류 보고 시스템
- 기능 요청 관리

### 11.3. 지속적 개선
- 성능 최적화 및 모니터링
- 추가 기능 개발 및 확장
- 사용자 요구에 따른 우선순위 조정

## 12. 유지보수 계획

### 12.1. 정기 업데이트
- 보안 패치 및 업데이트
- 의존성 관리 및 업데이트
- 새로운 기능 및 개선사항 롤아웃

### 12.2. 성능 모니터링 및 최적화
- 서버 성능 모니터링
- 병목 현상 식별 및 해결
- 사용자 경험 지속적 개선

### 12.3. 콘텐츠 및 저장 공간 관리
- 오래된 파일 정리 정책
- 저장 공간 최적화
- 백업 및 복구 전략 검증

---

## 시간 계획

총 예상 개발 기간: 약 3-4주

1. 프로젝트 초기 설정: 1-2일
2. 인증 시스템 구현: 1-2일
3. 핵심 다운로드 기능: 3-4일
4. 파일 관리 시스템: 2-3일
5. 공유 기능: 2일
6. 멜론 차트 기능: 3일
7. 파일 관리 고급 기능: 2일
8. 비디오 다운로드 기능: 2일
9. PWA 및 모바일 지원: 2일
10. 배포 및 운영 준비: 2일
11. 버그 수정 및 폴리싱: 3-5일

## 개발자 참고사항

- 모든 커밋은 의미 있는 단위로 자주 수행
- 코드 리뷰 및 자가 검토 습관화
- 중요 기능마다 테스트 케이스 작성
- 사용자 경험을 항상 최우선으로 고려
- 모바일 환경에서 지속적으로 테스트
- 성능과 네트워크 효율성 지속적 모니터링 